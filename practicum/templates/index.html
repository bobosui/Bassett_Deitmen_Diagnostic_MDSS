{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
$(document).ready(function() {

    var counter = 2;

    $('#addButton').live('click', function() {

        $('<p><input type="text" id="sign_symptom_name_' + counter + '" size="22" name="sign_symptom_name_' + counter + '" value="" placeholder="Sign or Symptom Name" /> <input type="text" id="sign_symptom_value_' + counter + '" size="20" name="sign_symptom_value_' + counter + '" value="" placeholder="Sign or Symptom Value" /> <a href="#" id="rmSignSymptom">Remove</a></p>').appendTo("#inDiv");
        counter++;
        return false
     });

    $('#rmSignSymptom').live('click', function() {
        if( counter > 2 ) {
                $(this).parent('p').remove();
                counter--;
        }
        return false;
    });

    $("#diagnoseButton").click(function() {
        var o = {}
        for (i = 1; i < counter; i++) {
            o[$("#sign_symptom_name_" + i).val()] = $("#sign_symptom_value_" + i).val()
        }

         $.ajax({
            type: "GET",
            url: $SCRIPT_ROOT + "/diagnose/",
            contentType: "application/json; charset=utf-8",
            data: o,
            success: function(data) {
                $('#echoResult').text(data.value); # TODO: FIX THIS
            }
        });
    });

    $.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

   $("#diagnoseButton").click(function() {

   });

});
</script>
<head>
<div style="text-align: center;"><h1>Diagnostic Medical Decision Support System</h1></div>

<input type='button' value='Add Button' id='addButton'>
<input type="button" value="Diagnose" id="diagnoseButton">

<form id="chart">
<div id="inDiv">
    <p><input type="text" name="sign_symptom_name_1" size="22" id="sign_symptom_name_1" value="" placeholder="Sign or Symptom Name" /> <input type="text" id="sign_symptom_value_1" size="20" name="sign_symptom_value_1" value="" placeholder="Sign or Symptom Value" /> <a href="#" id="rmSignSymptom">Remove</a></p>
</div>
</form>

<div id="diagnosis">

</div>

<strong><div id="echoResult"></div></strong>

{% endblock %}

</head>
